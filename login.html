<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Login ‚Ä¢ Ryttr</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg:#0b0f19; --surface:#121826; --text:#e6e6e6; --muted:#aab0bd; --accent:#5b9cff; }
    body{
      margin:0; min-height:100vh; display:grid; place-items:center; background:var(--bg);
      color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; padding:24px;
    }
    .card{
      width:100%; max-width:420px; background:var(--surface); border:1px solid rgba(255,255,255,.08);
      border-radius:16px; padding:24px; box-shadow:0 10px 30px rgba(0,0,0,.25); text-align:center;
    }
    h1{ margin:0 0 12px; font-size:26px; }
    .muted{ color:var(--muted); margin:8px 0 16px; }
    input[type=email]{ padding:12px; width:100%; border-radius:10px; border:1px solid rgba(255,255,255,.14); background:#0f1424; color:#fff; margin-bottom:12px; }
    button{ padding:12px 16px; border-radius:10px; border:none; background:var(--accent); color:#0b0f19; font-weight:800; cursor:pointer; }
    button:hover{ background:#78afff; }
  </style>
</head>
<body>
  <main class="card">
    <h1>üîë Sign in</h1>
    <p class="muted">Enter your email to receive a magic login link.</p>

    <form id="loginForm">
      <input id="email" type="email" placeholder="you@example.com" required />
      <button type="submit">Send Magic Link</button>
    </form>

    <p id="msg" class="muted"></p>
  </main>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script>
    // Supabase project
    const { createClient } = supabase;
    const db = createClient(
      "https://fuiuaiquuhhsxrhzwtoa.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ1aXVhaXF1dWhoc3hyaHp3dG9hIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0OTA3NjAsImV4cCI6MjA3NTA2Njc2MH0.fVM46kXmEx-SuzXOzHwOgeXEKSp4qgS-wFWKQZf-4WY"
    );

    const form = document.getElementById("loginForm");
    const emailInput = document.getElementById("email");
    const msg = document.getElementById("msg");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = emailInput.value.trim();
      msg.textContent = "‚è≥ Sending magic link‚Ä¶";

      try {
        const { error } = await db.auth.signInWithOtp({
          email,
          options: {
            emailRedirectTo: "https://ryttr.vercel.app/auth.html"
          }
        });
        if (error) throw error;
        msg.textContent = "‚úÖ Magic link sent! Check your inbox.";
        emailInput.value = "";
      } catch (err) {
        msg.textContent = "‚ùå Error: " + err.message;
      }
    });
  </script>
</body>
</html>
